<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EyÃ¼p Aygar EÄŸitim Platformu</title>

<style>
:root{
  --primary:#0b3c5d;
  --secondary:#1e88e5;
  --bg:#f4f6f8;
}
body{
  margin:0;
  font-family:"Segoe UI", Arial, sans-serif;
  background:var(--bg);
}
header{
  background:var(--primary);
  color:white;
  padding:15px 40px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
nav button{
  margin-left:10px;
  background:white;
  color:var(--primary);
  border:none;
  padding:8px 16px;
  border-radius:20px;
  cursor:pointer;
}
section{display:none;padding:50px;}
.active{display:block;}
.hero{text-align:center;}
.btn{
  padding:12px 24px;
  border:none;
  border-radius:25px;
  cursor:pointer;
  margin:10px;
}
.teacher{background:var(--primary);color:white;}
.student{background:var(--secondary);color:white;}
.cards{display:flex;gap:20px;flex-wrap:wrap;}
.card{
  background:white;
  width:220px;
  padding:20px;
  border-radius:15px;
  box-shadow:0 4px 10px rgba(0,0,0,.1);
  cursor:pointer;
}
input,select{
  width:260px;
  padding:10px;
  margin-bottom:12px;
}
footer{
  background:var(--primary);
  color:white;
  text-align:center;
  padding:15px;
}
</style>
</head>

<body>

<header>
  <h2>EyÃ¼p Aygar EÄŸitim</h2>
  <nav>
    <button onclick="goHome()">Ana Sayfa</button>
    <button onclick="logout()">Ã‡Ä±kÄ±ÅŸ</button>
  </nav>
</header>

<section id="home" class="hero active">
  <h1>GeleceÄŸin EÄŸitimi Burada</h1>
  <p>GerÃ§ek kullanÄ±cÄ±larla Ã§alÄ±ÅŸan okul platformu</p>
  <button class="btn teacher" onclick="showLogin()">GiriÅŸ Yap</button>
  <button class="btn student" onclick="showRegister()">KayÄ±t Ol</button>
</section>

<section id="login">
  <h2>GiriÅŸ Yap</h2>
  <input id="loginEmail" type="email" placeholder="Okul E-postasÄ±">
  <input id="loginPassword" type="password" placeholder="Åžifre">
  <button class="btn teacher" onclick="login()">GiriÅŸ</button>
</section>

<section id="register">
  <h2>KayÄ±t Ol</h2>
  <input id="regEmail" type="email" placeholder="Okul E-postasÄ±">
  <input id="regPassword" type="password" placeholder="Åžifre">
  <select id="role">
    <option value="student">Ã–ÄŸrenci</option>
    <option value="teacher">Ã–ÄŸretmen</option>
  </select>
  <button class="btn student" onclick="register()">KayÄ±t Ol</button>
</section>

<section id="panel">
  <h2 id="panelTitle"></h2>
  <p id="userMail"></p>
  <div class="cards" id="lessonCards"></div>

  <div id="teacherPanel" style="display:none;">
    <h3>Ders Ekle</h3>
    <input id="newLesson" placeholder="Ders adÄ±">
    <button class="btn teacher" onclick="addLesson()">Ekle</button>
  </div>
</section>

<footer>
Â© 2026 EyÃ¼p Aygar EÄŸitim Platformu â€“ genÃ§BÄ°Z
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, doc, setDoc, getDoc, collection, addDoc, getDocs }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAhx8N6VQrgejJyjvsxqbArDrDEpkG8Og0",
  authDomain: "eyup-aygar-egitim.firebaseapp.com",
  projectId: "eyup-aygar-egitim",
  storageBucket: "eyup-aygar-egitim.firebasestorage.app",
  messagingSenderId: "838780383490",
  appId: "1:838780383490:web:0a70080d59d7ba9529121b"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

window.hideAll = () => document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
window.goHome = () => { hideAll(); home.classList.add("active"); }
window.showLogin = () => { hideAll(); login.classList.add("active"); }
window.showRegister = () => { hideAll(); register.classList.add("active"); }

window.register = async () => {
  const email = regEmail.value;
  const pass = regPassword.value;
  const role = document.getElementById("role").value;
  const cred = await createUserWithEmailAndPassword(auth,email,pass);
  await setDoc(doc(db,"users",cred.user.uid),{email,role});
};

window.login = async () => {
  await signInWithEmailAndPassword(auth,loginEmail.value,loginPassword.value);
};

window.logout = () => signOut(auth);

onAuthStateChanged(auth, async user=>{
  if(!user){ goHome(); return; }
  hideAll(); panel.classList.add("active");
  userMail.innerText = user.email;

  const snap = await getDoc(doc(db,"users",user.uid));
  const role = snap.data().role;

  panelTitle.innerText = role==="teacher" ? "Ã–ÄŸretmen Paneli" : "Ã–ÄŸrenci Paneli";
  teacherPanel.style.display = role==="teacher" ? "block":"none";

  lessonCards.innerHTML="";
  const q = await getDocs(collection(db,"lessons"));
  q.forEach(d=> lessonCards.innerHTML+=`<div class="card">ðŸ“˜ ${d.data().name}</div>`);
});

window.addLesson = async ()=>{
  await addDoc(collection(db,"lessons"),{name:newLesson.value});
  location.reload();
};
</script>

</body>
</html>
